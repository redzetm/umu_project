計画

Umu Project Step2 計画書
=======================

■目的
Step1で構築したUEFI + GRUB + Linuxカーネル + BusyBox環境を拡張し、
シリアル出力を標準としたマルチユーザーモード環境を構築する。
また、起動を終了できる仕組みを導入し、より自然な運用を可能にする。

■Step1で実現済みの機能
- QEMUで動作
    コマンド: qemu-system-x86_64 -cdrom step1-boot.iso（もちろんそのほかのオプションも利用）
- UEFI起動
- GRUBメニューから Linux kernel 6.6.58 を選択して起動
- initが走り、レスキューモードで /bin/sh が起動
- BusyBox採用により基本的なUNIXコマンドが利用可能

■Step2で追加・変更する機能
1. 出力環境
   - VGAは対象外
   - シリアル出力を標準とし、ttyを標準出力に設定
   - QEMU起動コマンド例:
       qemu-system-x86_64 -cdrom step2-boot.iso -serial stdio

2. GRUBメニュー構成
   - 以下の2つのエントリを表示
       - Umu Project Linux kernel 6.6.58
       - Umu Project rescue 6.6.58

3. init動作
   - マルチユーザーモードでログインプロンプトを表示
   - ユーザー構成:
       - root
       - tama
   - BusyBoxを利用
   - BusyBoxの全コマンドを利用可能にするため以下を実行:
       busybox --install -s /bin

4. 起動終了の仕組み
   - Step1では ps -aux → kill -kill PID による強制終了を利用
   - Step2では poweroff / reboot コマンドを導入
       - root権限で実行可能
       - tamaユーザーは su によりroot昇格後に利用可能
   - QEMU側で poweroff → 仮想マシン終了、reboot → GRUB再起動

■期待される成果
- シリアルコンソール環境での安定したマルチユーザーモード運用
- BusyBoxによる基本的なUNIXコマンドの完全利用
- rootユーザーによる自然な終了操作 (poweroff / reboot)
- Step1よりも実用的な「ログイン・操作・終了」の流れを確立

■成功確率
- Step1の実績を踏まえ、構成要素は既知の範囲であり、
  設定ファイルの拡張とユーザー管理が中心となるため、
  成功確率は 80〜90% と見込む。

この概要設計をもとに~umu/step2/docs/詳細設計.txtを作成する。



